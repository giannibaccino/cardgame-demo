{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core'; //TODO: componente para el listado de mis juegos\n\nlet ListGameComponent = class ListGameComponent {\n  constructor(ws, api, router, auth) {\n    this.ws = ws;\n    this.api = api;\n    this.router = router;\n    this.auth = auth;\n    this.uid = JSON.parse(localStorage.getItem('user')).uid;\n    this.api.getMisJuegos(this.uid).subscribe(juegos => {\n      this.juegos = juegos;\n    });\n  }\n\n  ngOnDestroy() {\n    this.ws.close();\n  }\n\n  ngOnInit() {\n    this.api.getMisJuegos(this.auth.user.uid).subscribe(elements => {\n      this.dataSource = elements;\n    });\n  }\n\n  joinGame() {\n    console.log(\"Game Joined\");\n    this.router.navigate(['board']);\n  }\n\n  iniciarJuego(id) {\n    this.ws.connect(id).subscribe({\n      next: event => {\n        if (event.type === 'cardgame.tablerocreado') {\n          this.api.crearRonda({\n            juegoId: id,\n            tiempo: 80,\n            jugadores: event.jugadorIds.map(it => it.uuid)\n          });\n        }\n\n        if (event.type == 'cardgame.rondacreada') {\n          this.router.navigate(['board/' + id]);\n        }\n      },\n      error: err => console.log(err),\n      complete: () => console.log('complete')\n    });\n    this.api.iniciar({\n      juegoId: id\n    }).subscribe();\n  }\n\n};\nListGameComponent = __decorate([Component({\n  selector: 'app-list-game',\n  templateUrl: './list-game.component.html',\n  styleUrls: ['./list-game.component.scss']\n})], ListGameComponent);\nexport { ListGameComponent };","map":null,"metadata":{},"sourceType":"module"}